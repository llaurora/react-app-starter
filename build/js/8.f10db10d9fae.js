(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{190:function(e,t,n){"use strict";function i(e,t){return void 0===t&&(t={}),{type:e,data:t}}n.r(t),n.d(t,"changeLoginState",function(){return i})},282:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxNiIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIxIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjEiIHRyYW5zZm9ybT0icm90YXRlKDQ1IDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEyLjUzMSIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMC43NSIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjEiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI4LjA2MyIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgyMjUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iNi40MzgiIGZpbGw9IiMwMDAwMDAiIGZpbGwtb3BhY2l0eT0iMSIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjMDAwMDAwIiBmaWxsLW9wYWNpdHk9IjEiIHRyYW5zZm9ybT0icm90YXRlKDMxNSA2NCA2NCkiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgdmFsdWVzPSIwIDY0IDY0OzMxNSA2NCA2NDsyNzAgNjQgNjQ7MjI1IDY0IDY0OzE4MCA2NCA2NDsxMzUgNjQgNjQ7OTAgNjQgNjQ7NDUgNjQgNjQiIGNhbGNNb2RlPSJkaXNjcmV0ZSIgZHVyPSI3MjBtcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT48L2c+PC9zdmc+"},301:function(e,t,n){"use strict";n.r(t);n(209);var i=n(191),a=n.n(i),c=n(172),I=n.n(c),o=n(33),r=n.n(o),s=n(0),u=n.n(s),l=n(7),m=n.n(l),g=n(64),d=n(10),N={login:"http://"+window.location.host+"/mokeJson/login.json"},j=(n(192),n(220),n(105),n(107),n(222),n(224),n(229),n(231)),p=n.n(j),M=n(234),S=n.n(M),w=n(244),b=n.n(w),h=n(246),v=n.n(h),y=n(262),Z=n.n(y);n(281);var Y,A,D,C=n(282),P=n.n(C),W=(n(164),n(190));n.d(t,"default",function(){return x});var x=Object(g.b)(null,function(e){return Object(d.bindActionCreators)(r()({},W),e)})((D=A=function(e){function t(t){var n;return(n=e.call(this,t)||this).goLogin=function(){var e,t,i,c,I,o,r,s,u,l,m=n.state,g=m.userName,d=m.userPwd;g?(d||alert("请输入密码"),n.setState({loading:!0}),(e={url:N.login,method:"get"},i=e.url,c=e.method,I=void 0===c?"post":c,o=e.headers,r=void 0===o?{"Content-Type":"application/json;charset=utf-8"}:o,s=e.body,u=new Z.a(function(e,t){a()(function(){return t(new Error("Timeout：网络请求超时"))},25e3)}),l={headers:r,method:I,credentials:"include",body:S()(t=["get","head"]).call(t,I)?void 0:p()(s)},Z.a.race([fetch(function(){var e=i;if("get"===I&&s){var t,n=[];v()(t=b()(s)).call(t,function(e){return n.push(e+"="+s[e])}),e+=-1===e.search(/\?/)?"?"+n.join("&"):"&"+n.join("&")}return e}(),l),u]).then(function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}).then(function(e){return e.json()}).then(function(e){return e.success?e.result:Z.a.reject(e)}).catch(function(e){return alert(e.message||e.errorMsg||"网络异常，稍后再试"),Z.a.reject(e)})).then(function(e){a()(function(){sessionStorage.setItem("username",e.name),n.setState({loading:!1}),n.props.history.push("/"),n.props.changeLoginState("CANCEL_LOGIN_STATE",e)},1500)}).catch(function(){n.setState({loading:!1})})):alert("请输入用户名")},n.state={userName:"",userPwd:"",loading:!1},n}I()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;document.addEventListener("keyup",function(t){13===t.keyCode&&e.goLogin()})},n.render=function(){var e=this,t=this.state,n=t.userName,i=t.userPwd,a=t.loading;return u.a.createElement("div",{id:"loginArea"},u.a.createElement("ul",{className:"loginContent"},u.a.createElement("li",{className:"title"},"React App Init"),u.a.createElement("li",{className:"userItemBox"},u.a.createElement("input",{type:"text",placeholder:"请输入用户名",value:n,onChange:function(t){return e.setState({userName:t.target.value})}}),u.a.createElement("input",{type:"password",placeholder:"请输入密码",value:i,onChange:function(t){return e.setState({userPwd:t.target.value})}})),a?u.a.createElement("li",{className:"loading"},u.a.createElement("img",{src:P.a,alt:"loading"}),u.a.createElement("span",null,"登录中...")):u.a.createElement("li",{className:"loginBotton"},u.a.createElement("button",{type:"button",onClick:this.goLogin},"登录"))))},t}(s.Component),A.propTypes={changeLoginState:m.a.func,history:m.a.object},Y=D))||Y}}]);